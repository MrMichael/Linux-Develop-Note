

### 一、简介

[linux 启动](https://developer.toradex.com/knowledge-base/linux-booting)

要在任何支持的模块上引导linux映像，需要三个元素：

- 引导加载程序（u-boot）
- 一个linux内核（以及相应的设备树）
- 具有OS文件，二进制文件和库的根文件系统rootfs

在标准方案中，所有这些元素都存储在设备的闪存中。引导加载程序（uboot）已通过环境变量进行配置，自动从内存位置加载内核。引导加载程序还会在将控制权移交给内核之前，将设备树和根文件系统的内存地址以及任何额外参数传递给内核。这是默认设置图像的方式，这些情况不需要进一步配置。

但是，每个元素都可以存储在单独的媒体中。例如，U-boot可以存储在闪存，SD卡或USB记忆棒中。内核可以存储在闪存，SD卡，USB记忆棒中或远程存储在TFTP服务器中。根文件系统可以存储在闪存中，SD卡，USB记忆棒中或远程存储在NFS服务器中。

这些元素位置的组合通常用于不同的目的：

- 一切都在闪存中，这是生产和测试的标准配置；
- U-Boot在闪存中，内核和rootfs在SD卡/ USB / SATA驱动器中。此配置用于隔离或脱机系统中的内核/应用程序开发和调试。对于资源稀缺的系统（例如闪存容量低）也很有帮助；
- U-Boo在闪存中t，内核在远程TFTP服务器中，rootfs在远程NFS服务器中。此配置对于从连接的主机进行内核/应用程序开发和调试。



### 更改默认引导方案

U-Boot会自动执行存储在环境变量中的语句`bootcmd`。默认情况下，这会从内部Flash存储加载内核和rootfs。因此，如果要使用备用配置启动，通常必须手动停止自动引导并为引导配置运行相应的变量（例如`run nfsboot`或`run sdboot`）。如果要将此配置设置为默认引导方法，只需`bootcmd`使用备用命令覆盖该变量即可。

```shell
setenv bootcmd 'run sdboot'
saveenv
```

